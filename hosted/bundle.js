(()=>{let e,t,a,o;const n=async e=>{const t=await fetch(`/getGame?code=${a}`,{method:"get",headers:{Accept:"application/json"}}),o=await t.json();return 200===t.status&&o.state===e?o:new Promise((t=>{setTimeout((()=>t(n(e))),1e3)}))};window.onload=()=>{const c=document.querySelector("#newGameButton"),s=document.querySelector("#codeDisplay"),i=document.querySelector("#codeInput"),r=document.querySelector("#joinGameButton"),l=document.querySelector("#joinResultDisplay");c.onclick=async()=>{const c=await fetch("/newGame",{method:"post",headers:{Accept:"application/json"}}),i=await c.json();201===c.status?(e=!0,a=i.code,s.innerHTML=`Tell Player 2 to join with code: ${a}`,({player1Scribbles:o}=await n(1)),t=o,s.innerHTML="Player 2 has joined! "+(t?"Make a scribble!":"Wait for the other player to make a scribble.")):s.innerHTML=i.message},r.onclick=async()=>{a=i.value.toUpperCase();const n=await fetch(`/joinGame?code=${a}`,{method:"post",headers:{Accept:"application/json"}}),c=await n.json();200===n.status?(e=!1,({player1Scribbles:o}=c),t=!o,l.innerHTML="Game joined! "+(t?"Make a scribble!":"Wait for the other player to make a scribble.")):l.innerHTML=c.message}}})();